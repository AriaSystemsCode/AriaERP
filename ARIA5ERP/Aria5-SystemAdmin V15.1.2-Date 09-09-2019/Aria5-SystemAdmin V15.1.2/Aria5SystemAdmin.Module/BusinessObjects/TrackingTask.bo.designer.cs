//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using DevExpress.ExpressApp.DC;
using DevExpress.Persistent.Base;
using DevExpress.Persistent.BaseImpl;
using DevExpress.Xpo;
using DevExpress.Persistent.Validation;
using DevExpress.Persistent.Base.General;
using DevExpress.ExpressApp;
using DevExpress.ExpressApp.ConditionalAppearance;
using DevExpress.ExpressApp.Editors;

namespace Aria5SystemAdmin.Module.BusinessObjects
{
 
  
  [DefaultClassOptions]
  [RelatedEntity("Aria5-SystemAdmin-TrackingTask")]
  [Appearance("Action", AppearanceItemType = "Action", TargetItems = "CreateTrackingtaskonautotask", Criteria = "AutotaskID > 0", Context = "DetailView", Enabled = false)]
  //Dodo
  [Appearance("DisableWbsifNotKey", AppearanceItemType = "ViewItem", TargetItems = "WBSMonth", Criteria = "Project.Type!='Key'", Context = "DetailView", Visibility = ViewItemVisibility.Hide)]
  //Dodo
  [XafDefaultProperty("Tittle")]
  public partial class TrackingTask : DevExpress.Persistent.BaseImpl.BaseObject, ISupportNotifications
  {
    private Aria5SystemAdmin.Module.BusinessObjects.QAActivity _wBSActivity;
    private Aria5SystemAdmin.Module.BusinessObjects.QAWBS _wBSMonth;
    private System.DateTime _endDate;
    private System.DateTime _startDate;
    private Aria5SystemAdmin.Module.BusinessObjects.Activity _task;
    private System.Double? _duration;
    private Aria5SystemAdmin.Module.BusinessObjects.TrackingEntry _trackingEntry;
    private Aria5SystemAdmin.Module.BusinessObjects.Resources _resources;
    private StatusTypes _status;
    private System.String _description;
    //ATA [start]
    private System.Int32 _remaining;
    private System.Int32 _actuall;
    private System.DateTime _completedate;
    //ATA[END]
    /*ATA,1, [start]
       */private System.String _title;
    private Aria5SystemAdmin.Module.BusinessObjects.ProjectTemplate _project;
    private System.Int64 _autotaskid;
    //[NonPersistent]
    // string login;
    //ATA [End]
    public TrackingTask(DevExpress.Xpo.Session session)
      : base(session)
    {
      // login = SecuritySystem.CurrentUserName.Trim().ToUpper();
      // AutoTaskIntegrationManger phasemanager = new AutoTaskIntegrationManger();
    }

        //public override void AfterConstruction()
        //{
        //    base.AfterConstruction();

        //    if(WBSMonth == null)
        //    {
        //       // WBSMonth = new QAWBS();
        //    }
        //}
    //ATA add rule required field attribute to be mandatory 1/5/2017[start]
    //ATA add rule required field attribute to be mandatory 1/5/2017[End]
        [DevExpress.Xpo.SizeAttribute(30)]
    [RuleRequiredField]
    public Aria5SystemAdmin.Module.BusinessObjects.Activity Task
    {
      get
      {
        return _task;
      }
      set
      {
        SetPropertyValue("Task", ref _task, value);
      }
    }
    [DevExpress.Xpo.SizeAttribute(-1)]
    public System.String Description
    {
      get
      {
        return _description;
      }
      set
      {
        SetPropertyValue("Description", ref _description, value);
      }
    }
    //ATA add rule required field attribute to be mandatory 1/5/2017[start]
    //ATA add rule required field attribute to be mandatory 1/5/2017[End]
    [RuleRequiredField]
    public System.Double? Duration
    {
      get
      {
        return _duration;
      }
      set
      {
        SetPropertyValue("Duration", ref _duration, value);
      }
    }
    public StatusTypes Status
    {
      get
      {
        return _status;
      }
      set
      {
        SetPropertyValue("Status", ref _status, value);
      }
    }
    [RuleRequiredField]
    public Aria5SystemAdmin.Module.BusinessObjects.Resources Resources
    {
      get
      {
        return _resources;
      }
      set
      {
        SetPropertyValue("Resources", ref _resources, value);
      }
    }
    [DevExpress.Xpo.AssociationAttribute("TrackingTasks-TrackingEntry")]
    public Aria5SystemAdmin.Module.BusinessObjects.TrackingEntry TrackingEntry
    {
      get
      {
        return _trackingEntry;
      }
      set
      {
        SetPropertyValue("TrackingEntry", ref _trackingEntry, value);
        if (!IsSaving && !IsLoading && value != null)
        {
          this.Project = value.ProjectTemplate;
        }
      }
    }
    [RuleRequiredField]
    public System.DateTime StartDate
    {
      get
      {
        return _startDate;
      }
      set
      {
        SetPropertyValue("StartDate", ref _startDate, value);
      }
    }
    [RuleRequiredField]
    public System.DateTime EndDate
    {
      get
      {
        return _endDate;
      }
      set
      {
        SetPropertyValue("EndDate", ref _endDate, value);
      }
    }
    //[DevExpress.Persistent.Base.ImmediatePostDataAttribute]
    //ATA
    //ATA  
    [DevExpress.Persistent.Base.ImmediatePostDataAttribute]
    [RuleRequiredField(TargetCriteria = "Task.Name != 'Access Source Files' && Project.Type = 'Key'")]
    public Aria5SystemAdmin.Module.BusinessObjects.QAWBS WBSMonth
    {
      get
      {
        return _wBSMonth;
      }
      set
      {
        SetPropertyValue("WBSMonth", ref _wBSMonth, value);
      }
    }
    //[RuleRequiredField]
    public Aria5SystemAdmin.Module.BusinessObjects.QAActivity WBSActivity
    {
      get
      {
        return _wBSActivity;
      }
      set
      {
        SetPropertyValue("WBSActivity", ref _wBSActivity, value);
      }
    }
    //ATA
    public System.Int64 AutotaskID
    {
      get
      {
        return _autotaskid;
      }
      set
      {
        SetPropertyValue("AutotaskID", ref _autotaskid, value);
      }
    }
    //ATA add rule required field attribute to be mandatory 1/5/2017[start]
    //[RuleRequiredField]
    //ATA add rule required field attribute to be mandatory 1/5/2017[End]
    [DevExpress.Xpo.SizeAttribute(400)]
    public System.String Tittle
    {
      get
      {
        return _title;
      }
      set
      {
        SetPropertyValue("Tittle", ref _title, value);
      }
    }
    private System.Int32 _iD;
    public System.Int32 ID
    {
      get
      {
        return _iD;
      }
      set
      {
        SetPropertyValue("ID", ref _iD, value);
      }
    }
    public System.Int32 Remaining
    {
      get
      {
        return _remaining;
      }
      set
      {
        SetPropertyValue("Remaining", ref _remaining, value);
      }
    }
    public System.Int32 Actuall
    {
      get
      {
        return _actuall;
      }
      set
      {
        SetPropertyValue("Actuall", ref _actuall, value);
      }
    }
    public System.DateTime Completedate
    {
      get
      {
        return _completedate;
      }
      set
      {
        SetPropertyValue("Completedate", ref _completedate, value);
      }
    }
    [DevExpress.Xpo.Association("TrackingTaskNote-TrackingTask")]
    public XPCollection<Aria5SystemAdmin.Module.BusinessObjects.TrackingTaskNote> Notes
    {
      get
      {
        return GetCollection<Aria5SystemAdmin.Module.BusinessObjects.TrackingTaskNote>("Notes");
      }
    }
    private DateTime? alarmTime;
    [Browsable(false)]
    public DateTime? AlarmTime
    {
      get
      {
        return alarmTime;
      }
      set
      {
        alarmTime = value;
        if (value == null)
        {
          RemindIn = null;
          IsPostponed = false;
        }
      }
    }
    [Browsable(false)]
    public bool IsPostponed { get; set; }
    private string _notificationmessage;
    [Browsable(false)]
    [DevExpress.Xpo.SizeAttribute(500)]
    public string NotificationMessage
    {
      get
      {
        return _notificationmessage;
      }
      set
      {
        SetPropertyValue("NotificationMessage", ref _notificationmessage, value);
      }
    }
    [Browsable(false)]
    public TimeSpan? RemindIn { get; set; }
    [Browsable(false)]
    public object UniqueId
    {
      get
      {
        return Oid;
      }
    }
    // [RuleRequiredField]
    [Association("Project-Tasks")]
    public Aria5SystemAdmin.Module.BusinessObjects.ProjectTemplate Project
    {
      get
      {
        //if (this._trackingEntry != null && this._trackingEntry.ProjectTemplate != null)
        //{
        //    this._project = this._trackingEntry.ProjectTemplate;
        //}
        return _project;
      }
      set
      {
        SetPropertyValue("Project", ref _project, value);
      }
    }
    //ATA add time entry from system admin 
    //[Association("TrackingTask-TimeEntries")]
    //public XPCollection<AutoTaskTimeEntry> TimeEntries
    //{
    //    get
    //    {
    //        return GetCollection<AutoTaskTimeEntry>("TimeEntries");
    //    }
    //}
  }
}
